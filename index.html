<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kantat-O-Mat</title>
    <style>
        body {
            font-family: "Times New Roman", serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .statement { margin: 20px; font-size: 24px; text-align: center; }
        .button {
            margin: 5px; 
            padding: 10px; 
            font-size: 18px; 
            display: inline-block;
        }
    </style>
</head>
<body>
<img src="https://upload.wikimedia.org/wikipedia/commons/a/ad/Bachfest_Logo.svg" alt="Logo" style="width: 400px; height: auto; margin-top: 10px; margin-bottom: 20px;">
<h1 style="text-align: center; font-size: 3em; margin-bottom: 0px; width: 100%">Kantat-O-Mat</h1>
<h2 style="text-align: center; margin-bottom: 19px; width: 100%;">Welche Bach-Kantate passt zu dir?</h2>

<div class="statement" id="question"></div>
<div class="button-container">
    <button class="button" onclick="answer(1)">Ja</button>
    <button class="button" onclick="answer(2)">Nein</button>
    <button class="button" onclick="answer(3)">Weiß nicht</button>
</div>

<script>
    const statements = [
        "Ob mit »Lippi« oder mit »Thommy«, egal: Oft erinnere ich mich an die Zeiten, als man noch mit der Familie »Wetten, dass..?« geschaut hat!",
        "Bei hohen Geräuschen bekomme ich umgehend einen Hörsturz.",
        "Ausgepustete Eier und morgens um 4.30 Uhr raus: Ich liebe es!",
        "Ich feiere gerne und oft – und dabei darf es ruhig einmal krachen!",
        "Gerne denke ich an den Musikunterricht in meiner Grundschulzeit zurück.",
        "Ich mag es, mich manchmal in meine Traurigkeit fallenzulassen.",
        "Bevor ich in einem Restaurant esse, schau ich mir die Google-Bewertungen an.",
        "Ich zähle mich zu den geduldigsten Menschen der Welt.",
        "»Die Ratten der Lüfte«, dieses Geflatter und Gepicke: Na und? Ich finde Tauben total super!",
        "Zumindest so ein bisschen spirituell sind wir doch alle, oder?",
        "Weihnachten ist das einzige Fest, das ich in meinem Leben akzeptiere!",
        "Leipzig = Stern des Ostens!"
    ];

    const kantaten = {
        "Wie schön leuchtet der Morgenstern<br>BWV 1 (Leipzig 1725)": {
            scores: [3, 2, 3, 2, 2, 2, 1, 2, 2, 1, 3, 1],
            videoUrl: "https://youtu.be/7fNaMOtVUc4?si=ud-YwTLE7qvKXqqo"
        },
        "Ach Gott, vom Himmel sieh darein BWV 2<br>(Leipzig 1724)": {
            scores: [3, 1, 2, 2, 2, 1, 2, 2, 3, 1],
            videoUrl: "https://www.youtube.com/embed/exampleURL2"
        },
        "BWV 147": {
            scores: [1, 1, 1, 1, 1, 1, 1, 2, 3, 2],
            videoUrl: "https://www.youtube.com/embed/exampleURL3"
        }
    };

    let currentQuestion = 0;
    let userResponses = [];

    function displayQuestion() {
        document.getElementById("question").textContent = statements[currentQuestion];
    }

    function answer(response) {
        userResponses.push(response);
        currentQuestion++;
        
        if (currentQuestion < statements.length) {
            displayQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        let result = determineResult();
        document.getElementById("question").innerHTML = `
            Am besten passt zu dir die Bach-Kantate ...<br><br>${result.kantate}<br><br>
            <iframe width="560" height="315" src="${result.videoUrl}" frameborder="0" allowfullscreen></iframe>
        `;
        document.querySelectorAll("button").forEach(btn => btn.style.display = "none");
    }

    function determineResult() {
        let bestKantate = null;
        let bestScore = -1;

        for (let kantate in kantaten) {
            const { scores } = kantaten[kantate];
            let score = 0;

            let minLength = Math.min(userResponses.length, scores.length);
            for (let i = 0; i < minLength; i++) {
                if (userResponses[i] === scores[i]) {
                    score++;
                }
            }

            if (score > bestScore) {
                bestScore = score;
                bestKantate = kantate;
            }
        }

        // Fallback: Wenn keine exakte Übereinstimmung vorhanden ist, gebe das beste ähnliche Ergebnis zurück
        if (bestScore === 0) {
            return { kantate: "BWV 147", videoUrl: kantaten["BWV 147"].videoUrl }; // Beispiel für Standard-Ersatzkantate
        }

        return { kantate: bestKantate, videoUrl: kantaten[bestKantate].videoUrl };
    }

    displayQuestion();
</script>
</body>
</html>
